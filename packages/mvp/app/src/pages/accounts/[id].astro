---
import Layout from "@/layouts/MainLayout.astro";
import { getAccountInfo } from "@/lib/accounts";

const { user } = Astro.locals;

if (!user)
  return Astro.redirect("/login");

const id = Number.parseInt(Astro.params.id!, 10);

const account = Number.isInteger(id)
  ? await getAccountInfo(id)
  : null;

if (!account)
  return new Response(null, { status: 404 });
---

<Layout
  meta={{
    title: account.name,
    description: account.description,
  }}
>
  <div class="container">
    <h1>{account.name}</h1>
    <h2>Description</h2>
    <p>{account.description}</p>
    <h3>Additional info</h3>
    <address>
      <ul>
        <li>Email: {account.email}</li>
        <li>Address: {account.address}</li>
      </ul>
    </address>
  </div>
</Layout>

