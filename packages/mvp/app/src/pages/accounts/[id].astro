---
import Layout from "@/layouts/MainLayout.astro";
import { getAccountInfo } from "@/lib/accounts";

const { user } = Astro.locals;

if (!user)
  return Astro.redirect("/login");

const account = await getAccountInfo(Number(Astro.params.id));

if (!account)
  return Astro.redirect("/404");
---

<Layout
  meta={{
    title: account.name,
    description: account.description,
  }}
>
  <div class="container">
    <h1>{account.name}</h1>
    <h2>Description</h2>
    <p>{account.description}</p>
    <h3>Additional info</h3>
    <address>
      <ul>
        <li>Email: {account.email}</li>
        <li>Address: {account.address}</li>
      </ul>
    </address>
  </div>
</Layout>

