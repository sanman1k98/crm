---
import Layout from "@/layouts/MainLayout.astro";
import { getOrgAccounts } from "@/lib/orgs"

const { user } = Astro.locals;

if (!user)
  return Astro.redirect("/login");

const accounts = await getOrgAccounts(user.primary_org);
---

<Layout
  meta={{
    title: "Accounts",
    description: "Organization accounts",
  }}
>
  <div class="pico container">
  <h1>Accounts</h1>
    {
      accounts.map(account => (
        <article class="mx-auto max-w-sm">
          {account.name}
        </article>
      ))
    }
  </div>
</Layout>
